<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SithasoApex Component - Complete Demo</title>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <script src="SithasoApex.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .chart-container {
      background: white;
      border-radius: 8px;
      padding: 20px 20px 20px 20px; /* Extra bottom padding for legend */
      margin: 20px 0;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow: visible; /* Allow tooltips and legend to extend beyond container */
      position: relative; /* For proper positioning */
      z-index: 1; /* Ensure tooltips appear above other elements */
    }
    .chart-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 20px;
    }
    .controls {
      margin: 20px 0;
      padding: 15px;
      background: #e8f4fd;
      border-radius: 6px;
      margin-bottom: 15px;
      color: #666;
    }
    button {
      background: #008FFB;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      margin: 0 5px;
    }
    button:hover { background: #0077e6; }
    h1 { color: #333; text-align: center; }
    h2 { color: #555; border-bottom: 2px solid #008FFB; padding-bottom: 5px; }
    .code-section { margin-top:12px; background:#f7f7f9; border:1px solid #e1e1e8; padding:12px; border-radius:6px; }
    /* Code blocks: wrap long lines, hide horizontal scroll, enable vertical scrolling */
    pre.code-block {
      margin-top:8px;
      white-space: -moz-pre-wrap;
      white-space: -pre-wrap;
      white-space: -o-pre-wrap;
      white-space: pre-wrap; /* allow wrapping of long lines */
      word-wrap: break-word;
      word-break: break-word;
      overflow-x: hidden !important; /* disable horizontal scrolling */
      overflow-y: auto;   /* enable vertical scrolling when content is tall */
      max-height: 60vh;   /* let it expand up to 60% of viewport height */
      font-family: Consolas, 'Courier New', monospace;
      font-size:13px;
      padding-right: 62px; /* space for Prism toolbar / copy button */
    }
    pre.code-block > code { display: block; }

    /* Ensure inner code wraps and prevents horizontal scroll even when Prism sets white-space */
    pre.code-block, pre.code-block > code {
      white-space: pre-wrap !important;
      word-break: break-word;
      overflow-x: hidden !important;
    }
    .controls-desc { margin-bottom: 15px; color: #666; }
  </style>
  <!-- Prism.js for syntax highlighting of example code blocks -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
</head>
<body>
  <h1>ğŸ¯ SithasoApex Component - Complete Demo</h1>
  <p class="intro-muted">Vanilla JavaScript web component for beautiful, responsive charts</p>

  
  <div class="chart-grid">
    <div class="chart-container">
      <h2>ğŸ“ˆ 1. Simple Line Chart</h2>
      <sithaso-apex
        id="simple-line-chart"
        type="line"
        title="Website Traffic"
        x-axis-title="Days"
        y-axis-title="Visitors"
        categories='["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]'
        data='[{"name": "Daily Visitors", "data": [1200, 1350, 1180, 1420, 1680, 1890, 2100], "color": "#008FFB"}]'
        height="350px">
      </sithaso-apex>
      <div class="code-section">
        <strong>Code</strong>
        <pre class="code-block"><code class="language-html">&lt;sithaso-apex
  id="simple-line-chart"
  type="line"
  title="Website Traffic"
  x-axis-title="Days"
  y-axis-title="Visitors"
  categories='["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]'
  data='[{"name": "Daily Visitors", "data": [1200, 1350, 1180, 1420, 1680, 1890, 2100], "color": "#008FFB"}]'
  height="350px"
&gt;&lt;/sithaso-apex&gt;</code></pre>
      </div>
    </div>

    <div class="chart-container">
      <h2>ğŸ“ˆ 2. Simple Line Chart (Rotated XAxis Labels)</h2>
      <sithaso-apex
        id="line-chart-no-rotation"
        type="line"
        title="Website Traffic (Rotated XAxis Labels)"
        x-axis-title="Days"
        y-axis-title="Visitors"
        x-axis-label-rotate="90"
        categories='["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]'
        data='[{"name": "Daily Visitors", "data": [1200, 1350, 1180, 1420, 1680, 1890, 2100], "color": "#008FFB"}]'
        height="350px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ“ˆ 3. Line Chart (Mutliple Series)</h2>
      <sithaso-apex
        id="line-chart"
        type="line"
        title="Monthly Revenue Growth"
        x-axis-title="Months"
        y-axis-title="Revenue ($)"
        x-axis-label-rotate="45"
        x-axis-offsety="-15"
        categories='["Jan", "Feb", "Mar", "Apr", "May"]'
        data='[{"name": "Revenue", "data": [100, 120, 140, 160, 180], "color": "#008FFB"}, {"name": "Target", "data": [110, 130, 135, 155, 175], "color": "#00E396"}]'
        height="400px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ“ˆ 4. Straight Line Chart</h2>
      <sithaso-apex
        id="line-chart-straight"
        type="line"
        title="Monthly Revenue Growth (Straight Lines)"
        x-axis-title="Months"
        y-axis-title="Revenue ($)"
        x-axis-label-rotate="45"
        x-axis-offsety="-15"
        curve="straight"
        categories='["Jan", "Feb", "Mar", "Apr", "May"]'
        data='[{"name": "Revenue", "data": [100, 120, 140, 160, 180], "color": "#008FFB"}, {"name": "Target", "data": [110, 130, 135, 155, 175], "color": "#00E396"}]'
        height="400px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ“ˆ 5. Straight Line Chart</h2>
      <sithaso-apex
        type="line"
        title="Stock Price Movement"
        x-axis-title="Time"
        y-axis-title="Price ($)"
        curve="straight"
        gradient="false"
        categories='["9:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00"]'
        data='[{"name": "Stock Price", "data": [100, 105, 98, 112, 108, 115, 120], "color": "#FF4560"}]'
        height="350px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ“ˆ 6. Step Line Chart</h2>
      <sithaso-apex
        type="line"
        title="Temperature Changes"
        x-axis-title="Time"
        y-axis-title="Temperature (Â°C)"
        curve="stepline"
        categories='["00:00", "04:00", "08:00", "12:00", "16:00", "20:00", "24:00"]'
        data='[{"name": "Temperature", "data": [15, 15, 22, 22, 28, 28, 18], "color": "#00E396"}]'
        height="350px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ“ˆ 7. Dashed Line Chart</h2>
      <sithaso-apex
        type="line"
        title="Project Progress"
        x-axis-title="Weeks"
        y-axis-title="Completion (%)"
        categories='["Week 1", "Week 2", "Week 3", "Week 4", "Week 5", "Week 6", "Week 7"]'
        data='[{"name": "Planned", "data": [10, 25, 40, 60, 75, 90, 100], "color": "#FEB019", "dashed": true}, {"name": "Actual", "data": [30, 67, 70, 90, 100, 160, 150], "color": "#FF4560", "dashed": true}]'
        height="350px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ“ˆ 8. Realtime Line Chart</h2>
      <sithaso-apex
        id="realtime-chart"
        type="line"
        title="Dynamic Updating Chart"
        x-axis-title="Time"
        y-axis-title="Value"
        realtime="true"
        options='{"xaxis": { "type": "datetime", "range": 777600000}}'
        height="350px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ“ˆ 9. Line Chart with Annotations</h2>
      <sithaso-apex
        type="line"
        title="Sales Performance with Key Events"
        x-axis-title="Months"
        y-axis-title="Sales ($)"
        categories='["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul"]'
        data='[{"name": "Sales", "data": [12000, 15000, 18000, 22000, 19000, 25000, 28000], "color": "#00E396"}]'
        options='{"annotations": {"points": [{"x": "Apr", "y": 22000, "marker": {"size": 8, "fillColor": "#fff", "strokeColor": "#FF4560", "radius": 2}, "label": {"text": "Q1 Target Met", "offsetY": -10}}], "xaxis": [{"x": "Mar", "borderColor": "#FEB019", "label": {"text": "Product Launch", "style": {"color": "#FEB019", "background": "#FEB01920"}}}]}}'
        height="350px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ“Š 10. Column Chart</h2>
      <sithaso-apex
        type="column"
        title="Monthly Revenue"
        x-axis-title="Months"
        y-axis-title="Revenue ($)"
        x-axis-label-rotate="45"
        categories='["Jan", "Feb", "Mar", "Apr", "May", "Jun"]'
        data='[{"name": "Revenue", "data": [1200, 1500, 1800, 2200, 1900, 2500], "color": "#FF4560"}]'
        height="300px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ“ˆ 11. Column Chart Grouped</h2>
      <sithaso-apex
        type="column"
        title="Monthly Revenue Growth"
        x-axis-title="Months"
        y-axis-title="Revenue ($)"
        x-axis-label-rotate="45"
        categories='["Jan", "Feb", "Mar", "Apr", "May"]'
        data='[{"name": "Revenue", "data": [100, 120, 140, 160, 180], "color": "#008FFB"}, {"name": "Target", "data": [110, 130, 135, 155, 175], "color": "#00E396"}]'
        height="400px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ¥§ 12. Pie Chart</h2>
      <sithaso-apex
        type="pie"
        title="Browser Usage Statistics"
        data='[{"name": "Desktop", "data": 44, "color": "#008FFB"}, {"name": "Mobile", "data": 23, "color": "#00E396"}, {"name": "Tablet", "data": 33, "color": "#FEB019"}]'
        height="300px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ© 13. Donut Chart</h2>
      <sithaso-apex
        type="donut"
        title="Browser Market Share"
        data='[{"name": "Chrome", "data": 65, "color": "#008FFB"}, {"name": "Firefox", "data": 20, "color": "#00E396"}, {"name": "Safari", "data": 10, "color": "#FEB019"}, {"name": "Other", "data": 5, "color": "#FF4560"}]'
        height="300px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ“Š 14. Basic Area Chart</h2>
      <sithaso-apex
        type="area"
        title="Monthly Revenue Growth"
        x-axis-title="Months"
        y-axis-title="Revenue ($)"
        x-axis-label-rotate="45"
        curve="straight"
        categories='["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep"]'
        data='[{"name": "Revenue", "data": [30, 40, 35, 50, 49, 60, 70, 91, 125], "color": "#008FFB"}]'
        height="300px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸŒŠ 15. Spline Area Chart</h2>
      <sithaso-apex
        type="area"
        title="Smooth Data Trends"
        x-axis-title="Months"
        y-axis-title="Values"
        x-axis-label-rotate="45"
        categories='["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul"]'
        data='[{"name": "Series 1", "data": [31, 40, 28, 51, 42, 109, 100], "color": "#008FFB"}, {"name": "Series 2", "data": [11, 32, 45, 32, 34, 52, 41], "color": "#00E396"}]'       
        height="300px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ“‰ 16. Area Chart with Negative Values</h2>
      <sithaso-apex
        type="area"
        title="Profit/Loss Analysis"
        x-axis-title="Months"
        y-axis-title="Amount ($)"
        categories='["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep"]'
        data='[{"name": "Profit", "data": [10, 41, 35, 51, 49, 62, 69, 91, 148], "color": "#00E396"}, {"name": "Loss", "data": [-10, -20, -15, -25, -30, -35, -40, -45, -50], "color": "#FF4560"}]'
        height="300px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ“š 17. Stacked Area Chart</h2>
      <sithaso-apex
        type="area"
        title="Website Traffic Sources"
        x-axis-title="Months"
        y-axis-title="Traffic Volume"
        categories='["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep"]'
        data='[{"name": "Organic Search", "data": [44, 55, 57, 56, 61, 58, 63, 60, 66], "color": "#008FFB"}, {"name": "Direct", "data": [76, 85, 101, 98, 87, 105, 91, 114, 94], "color": "#00E396"}, {"name": "Social Media", "data": [35, 41, 36, 26, 45, 48, 52, 53, 41], "color": "#FEB019"}]'        
        height="300px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ“ 19. Scatter Plot with Axis Titles</h2>
      <sithaso-apex
        type="scatter"
        title="Data Correlation Analysis"
        x-axis-title="X Coordinate"
        y-axis-title="Y Coordinate"
        data='[{"name": "Data Points", "data": [[10, 20], [15, 25], [20, 30], [25, 35], [30, 40]], "color": "#008FFB"}]'        
        height="300px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ¯ 20. Radial Bar</h2>
      <sithaso-apex
        type="radialBar"
        data='[{"name": "Progress", "data": 70, "color": "#008FFB"}, {"name": "Score", "data": 80, "color": "#00E396"}, {"name": "Rating", "data": 90, "color": "#FEB019"}]'
        height="300px">
      </sithaso-apex>
    </div>

    

    <div class="chart-container">
      <h2>ğŸ 21. Radial Bar</h2>
      <sithaso-apex
        type="radialBar"
        data='[{"name": "Cricket", "data": 70, "color": "#008FFB"}]'
        hollow-size="70%"
        height="350px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ 22. Radial Bar</h2>
      <sithaso-apex
        type="radialBar"
        data='[{"name": "Cricket", "data": 70, "color": "#008FFB"}]'
        hollow-size="70%"
        dashed-radial="true"
        height="350px">
      </sithaso-apex>
    </div>

    <div class="chart-container">
      <h2>ğŸ“Š 23. Horizontal Bar Chart</h2>
      <sithaso-apex
        title="Revenue Per Month"
        type="bar"
        categories='["Jan", "Feb", "Mar", "Apr", "May"]'
        data='[{"name": "Revenue", "data": [100, 120, 140, 160, 180], "color": "#008FFB"}]'
        x-axis-title="Revenue ($)"
        x-axis-offsety="20"
        y-axis-title="Months"
        height="350px">
      </sithaso-apex>
    </div>
  </div>

  <div class="chart-container">
      <h2>ğŸ“ˆ 24. Horizontal Bar Grouped</h2>
      <sithaso-apex
        type="bar"
        title="Monthly Revenue Growth"
        x-axis-title="Revenue vs Target"
        y-axis-title="Month"
        categories='["Jan", "Feb", "Mar", "Apr", "May"]'
        data='[{"name": "Revenue", "data": [100, 120, 140, 160, 180], "color": "#008FFB"}, {"name": "Target", "data": [110, 130, 135, 155, 175], "color": "#00E396"}]'
        height="400px">
      </sithaso-apex>
    </div>

  <div class="chart-container">
    <h2>ğŸ“¡ 25. Radar Chart</h2>
    <sithaso-apex
      type="radar"
      title="Radar Comparison"
      x-axis-title="Metrics"
      y-axis-title="Score"
      marker-size="0"
      categories='["Strength", "Speed", "Endurance", "Agility", "Technique", "Luck"]'
      data='[{"name": "Car 1", "data": [80, 50, 30, 40, 100, 20], "color": "#008FFB"}]'
      height="350px">
    </sithaso-apex>
  </div>

  <div class="chart-container">
    <h2>ğŸ“¡ 25a. Radar Chart - Multi Series</h2>
    <sithaso-apex
      type="radar"
      title="Radar Chart - Multi Series"
      marker-size="0"
      categories='["2011", "2012", "2013", "2014", "2015", "2016"]'
      data='[{"name":"Series 1","data":[80,50,30,40,100,20]},{"name":"Series 2","data":[20,30,40,80,20,80]},{"name":"Series 3","data":[44,76,78,13,43,10]}]'
      options='{"stroke":{"width":2},"fill":{"opacity":0.1},"chart":{"dropShadow":{"enabled":true,"blur":1,"left":1,"top":1}}}'
      height="350px">
    </sithaso-apex>
  </div>

  <!-- Dynamic Options Demo -->
  <div class="chart-container">
    <h2>ğŸŒ 26. Polar Area Chart</h2>
    <sithaso-apex
      type="polarArea"
      title="Polar Area Distribution"
      categories='["House A", "House B", "House C", "House D", "House E"]'
      colors='["#FF4560", "#00E396", "#775DD0", "#FEB019", "#FF66C3"]'
      data='[44, 20, 13, 43]'
      height="350px">
    </sithaso-apex>
  </div>

  <div class="chart-container">
    <h2>ğŸ”§ Dynamic Options Demo</h2>
    <p class="controls-desc">Click the buttons below to dynamically update chart options using the setter:</p>
    
    <div class="controls">
        <button onclick="toggleTheme()">ğŸŒ“ Toggle Theme</button>
        <button onclick="changeChartColors()">ğŸ¨ Colors</button>
        <button onclick="updateChartTitle()">ğŸ“ Title</button>
        <button onclick="toggleDataLabels()">ğŸ·ï¸ Labels</button>
        <button onclick="resetChartOptions()">ğŸ”„ Reset</button>
    </div>
    
    <sithaso-apex
      id="dynamic-chart"
      type="bar"
      title="Dynamic Options Demo"
      x-axis-title="Categories"
      y-axis-title="Values"
      data='[{"name": "Series 1", "data": {"A": 10, "B": 20, "C": 30, "D": 40}}]'
      height="350px">
    </sithaso-apex>
  </div>

  <script>
    function updateRandomData() {
      const simpleLineChart = document.getElementById('simple-line-chart');
      const lineChart = document.getElementById('line-chart');
      const straightLineChart = document.querySelector('sithaso-apex[title="Stock Price Movement"]');
      const stepLineChart = document.querySelector('sithaso-apex[title="Temperature Changes"]');
      const dashedLineChart = document.querySelector('sithaso-apex[title="Project Progress"]');
      const barChart = document.getElementById('bar-chart');

      // Generate random data for simple line chart (single series)
      const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
      const simpleLineData = [];
      const simpleLineVisitors = {};
      days.forEach(day => {
        simpleLineVisitors[day] = Math.floor(Math.random() * 1000) + 1000; // Random visitors between 1000-2000
      });
      simpleLineData.push({ name: 'Daily Visitors', data: simpleLineVisitors });

      // Generate random data for multi-series line chart
      const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May'];
      const lineData = [];
      const barData = [];

      const lineRevenue = {};
      const lineTarget = {};
      months.forEach(month => {
        lineRevenue[month] = Math.floor(Math.random() * 200) + 50;
        lineTarget[month] = Math.floor(Math.random() * 200) + 60;
      });
      lineData.push({ name: 'Revenue', data: lineRevenue });
      lineData.push({ name: 'Target', data: lineTarget });

      // Generate random data for straight line chart
      const times = ['9:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00'];
      const straightLineData = [];
      const stockPrices = {};
      let basePrice = 100;
      times.forEach(time => {
        basePrice += Math.floor(Math.random() * 20) - 10; // Random change between -10 and +10
        stockPrices[time] = Math.max(50, basePrice); // Keep price above 50
      });
      straightLineData.push({ name: 'Stock Price', data: stockPrices });

      // Generate random data for step line chart
      const tempTimes = ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'];
      const stepLineData = [];
      const temperatures = {};
      tempTimes.forEach(time => {
        temperatures[time] = Math.floor(Math.random() * 25) + 10; // Random temp between 10-35Â°C
      });
      stepLineData.push({ name: 'Temperature', data: temperatures });

      // Generate random data for dashed line chart
      const weeks = ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6', 'Week 7'];
      const dashedLineData = [];
      const plannedProgress = {};
      const actualProgress = {};
      weeks.forEach((week, index) => {
        const expected = (index + 1) * 14.28; // Roughly 100/7 â‰ˆ 14.28
        plannedProgress[week] = Math.round(expected);
        actualProgress[week] = Math.round(expected + (Math.random() * 10 - 5)); // Â±5 variance
      });
      dashedLineData.push({ name: 'Planned', data: plannedProgress });
      dashedLineData.push({ name: 'Actual', data: actualProgress });

      // Generate random data for realtime chart
      const realtimeChart = document.getElementById('realtime-chart');
      if (realtimeChart) {
        const realtimeData = [];
        const cpuUsage = {};
        // Generate last 10 minutes of data
        for (let i = 9; i >= 0; i--) {
          const time = new Date(Date.now() - i * 60000).toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit' });
          cpuUsage[time] = Math.floor(Math.random() * 40) + 30; // Random CPU usage between 30-70%
        }
        realtimeData.push({ name: 'CPU Usage', data: cpuUsage });
        realtimeChart.updateData(realtimeData);
      }

      const barValues = ['Q1', 'Q2', 'Q3', 'Q4'].map(quarter => Math.floor(Math.random() * 100) + 100);
      barData.push({ name: 'Quarterly Sales', data: barValues });

      simpleLineChart.updateData(simpleLineData);
      lineChart.updateData(lineData);
      if (straightLineChart) straightLineChart.updateData(straightLineData);
      if (stepLineChart) stepLineChart.updateData(stepLineData);
      if (dashedLineChart) dashedLineChart.updateData(dashedLineData);
      barChart.updateData(barData);
    }

    function toggleTheme() {
      const chart = document.querySelectorAll('dynamic-chart');
      const currentTheme = chart.getAttribute('theme');
      if (currentTheme === 'dark') {
        chart.removeAttribute('theme');
      } else {
        chart.setAttribute('theme', 'dark');
      }
    }

    // Dynamic Options Demo Functions
    function changeChartColors() {
      const chart = document.getElementById('dynamic-chart');
      chart.options = {
        colors: ['#FF4560', '#00E396', '#FEB019', '#775DD0']
      };
      console.log('Chart colors updated!');
    }

    function updateChartTitle() {
      const chart = document.getElementById('dynamic-chart');
      chart.options = {
        title: {
          text: 'Updated Chart Title - ' + new Date().toLocaleTimeString(),
          style: { color: '#FF4560' }
        }
      };
      console.log('Chart title updated!');
    }

    function toggleDataLabels() {
      const chart = document.getElementById('dynamic-chart');
      const currentOptions = chart.options;
      const showLabels = !currentOptions.dataLabels?.enabled;

      chart.options = {
        dataLabels: {
          enabled: showLabels
        }
      };
      console.log('Data labels ' + (showLabels ? 'enabled' : 'disabled') + '!');
    }

    function resetChartOptions() {
      const chart = document.getElementById('dynamic-chart');
      // Reset to original options by recreating the chart
      chart.setAttribute('title', 'Dynamic Options Demo');
      chart.removeAttribute('options'); // This will trigger recreation with defaults
      console.log('Chart options reset!');
    }

    // Demo: Auto-update every 10 seconds
    setInterval(updateRandomData, 10000);

    // Realtime chart implementation (matching ApexCharts website example)
    let data = [];
    let lastDate = 0;
    const XAXISRANGE = 777600000; // 9 days in milliseconds

    function getNewSeries(baseval, { min, max }) {
      const newDate = baseval + 86400000; // Add 1 day
      lastDate = newDate;

      for (let i = 0; i < 1; i++) { // Add just one new point
        const x = baseval;
        const y = Math.floor(Math.random() * (max - min + 1)) + min;
        data.push([x, y]);
      }
    }

    // Initialize with some data
    const baseval = new Date().getTime() - XAXISRANGE;
    getNewSeries(baseval, { min: 10, max: 90 });

    let intervalRuns = 0;
    const interval = window.setInterval(function () {
      intervalRuns++;
      getNewSeries(lastDate, {
        min: 10,
        max: 90
      });

      const realtimeChart = document.getElementById('realtime-chart');
      if (realtimeChart && realtimeChart.chart) {
        realtimeChart.chart.updateSeries([{
          data: data.slice()
        }]);
      }

      // For testing purposes, clear interval after 2 runs if in test mode
      if (intervalRuns === 2 && window.isATest === true) {
        clearInterval(interval);
      }
    }, 1000);
  </script>
    <!-- Prism JS + copy toolbar plugin -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
    <script>
      // Fallback copy button for browsers where Prism plugins may not initialize
      document.addEventListener('DOMContentLoaded', function () {
        try {
          var hasToolbar = window.Prism && Prism.plugins && Prism.plugins.toolbar;
        } catch (e) {
          var hasToolbar = false;
        }

        if (!hasToolbar) {
          document.querySelectorAll('pre > code').forEach(function (codeBlock) {
            var pre = codeBlock.parentNode;
            if (!pre) return;
            // avoid adding duplicate buttons
            if (pre.querySelector('.copy-btn')) return;

            var btn = document.createElement('button');
            btn.className = 'copy-btn';
            btn.setAttribute('aria-label', 'Copy code');
            btn.textContent = 'Copy';
            btn.addEventListener('click', function () {
              var text = codeBlock.textContent;
              if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(function () {
                  btn.textContent = 'Copied';
                  setTimeout(function () { btn.textContent = 'Copy'; }, 1400);
                });
              } else {
                // execCommand fallback
                var ta = document.createElement('textarea');
                ta.value = text;
                ta.style.position = 'fixed'; ta.style.left = '-9999px';
                document.body.appendChild(ta);
                ta.select();
                try { document.execCommand('copy'); btn.textContent = 'Copied'; } catch (e) { }
                document.body.removeChild(ta);
                setTimeout(function () { btn.textContent = 'Copy'; }, 1400);
              }
            });

            // basic positioning without editing existing CSS files
            pre.style.position = pre.style.position || 'relative';
            btn.style.position = 'absolute';
            btn.style.top = '8px';
            btn.style.right = '8px';
            btn.style.padding = '4px 8px';
            btn.style.border = 'none';
            btn.style.borderRadius = '3px';
            btn.style.background = '#2d2d2d';
            btn.style.color = '#fff';
            btn.style.cursor = 'pointer';

            pre.appendChild(btn);
          });
        }
          // Generate pretty-printed code sections for sithaso-apex elements that don't have one
          try {
            document.querySelectorAll('sithaso-apex').forEach(function(el) {
              var container = el.closest('.chart-container') || el.parentNode;
              if (!container) return;
              // skip if container already has a code-section
              if (container.querySelector('.code-section')) return;

              // ignore any runtime-injected attributes like `style` (Prism/plugins may add these)
              var attrs = Array.prototype.slice.call(el.attributes || []).filter(function(a) { return a.name !== 'style'; }).map(function(a) {
                var val = a.value;
                // try to pretty-print JSON attributes
                try {
                  var parsed = JSON.parse(val);
                  val = JSON.stringify(parsed, null, 2);
                } catch (e) {
                  // leave as-is
                }
                return { name: a.name, value: val };
              });

              var lines = ['<sithaso-apex'];
              attrs.forEach(function(a) {
                var v = a.value;
                // choose quoting: use single quotes for values that contain double quotes or newlines
                if (v.indexOf('\n') !== -1 || v.indexOf('"') !== -1) {
                  // escape single quotes inside
                  v = v.replace(/'/g, '&#39;');
                  v = "'" + v + "'";
                } else {
                  v = '"' + v.replace(/"/g, '&quot;') + '"';
                }
                // indent multi-line values for readability
                if (v.indexOf('\n') !== -1) {
                  v = v.replace(/\n/g, '\n  ');
                }
                lines.push('  ' + a.name + '=' + v);
              });
              lines.push('></sithaso-apex>');

              var snippet = lines.join('\n');
              function escapeHtml(s) { return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

              var codeSection = document.createElement('div');
              codeSection.className = 'code-section';
              codeSection.innerHTML = '<strong>Code</strong><pre class="code-block"><code class="language-html">' + escapeHtml(snippet) + '</code></pre>';
              container.appendChild(codeSection);
            });

            // Re-run Prism highlighting if available
            if (window.Prism && typeof Prism.highlightAll === 'function') {
              Prism.highlightAll();
            }

            // Remove unnecessary inline styles Prism sometimes injects into code blocks
            function removePrismInlineStyles() {
              // target only pre and code elements inside our code sections
              document.querySelectorAll('.code-section pre, .code-section pre > code, .code-section code').forEach(function(el) {
                if (el.hasAttribute('style')) {
                  el.removeAttribute('style');
                }
              });
            }

            // Initial cleanup and a couple of delayed cleanups to catch async plugin changes
            removePrismInlineStyles();
            setTimeout(removePrismInlineStyles, 100);
            setTimeout(removePrismInlineStyles, 500);

            // Watch for future additions/changes and clean them as they appear (narrow to code elements)
            try {
              var obs = new MutationObserver(function(mutations) {
                mutations.forEach(function(m) {
                  if (m.type === 'attributes' && m.attributeName === 'style') {
                    var el = m.target;
                    if (!el) return;
                    if (el.matches && (el.matches('pre') || el.matches('code')) && el.closest('.code-section')) {
                      if (el.hasAttribute('style')) el.removeAttribute('style');
                    }
                  } else if (m.addedNodes && m.addedNodes.length) {
                    m.addedNodes.forEach(function(node) {
                      if (node.nodeType === 1 && node.closest && node.closest('.code-section')) removePrismInlineStyles();
                    });
                  }
                });
              });
              obs.observe(document.body, { attributes: true, subtree: true, childList: true });
            } catch (e) {
              // ignore if MutationObserver unavailable
            }
          } catch (e) {
            // non-fatal
            console.warn('Failed to auto-generate code sections:', e);
          }
      });
    </script>
</body>
</html>